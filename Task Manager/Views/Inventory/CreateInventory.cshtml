@{
    ViewBag.Title = "CreateInventory";
    if (ViewData["id"].ToString() == "1")
    {
        Layout = "~/Views/Shared/_Home.cshtml";
    }
    else if (ViewData["id"].ToString() == "2")
    {
        Layout = "~/Views/Shared/Admin.cshtml";
    }
    else if (ViewData["id"].ToString() == "3")
    {
        Layout = "~/Views/Shared/Normal.cshtml";
    }
    else
    {
        Layout = "~/Views/Shared/CSR.cshtml";
    }
}
<div id="wrapper">
    <!-- Navigation -->
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header" style="text-align:center">Create Inventory </h1>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Create Inventory
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class=" col-lg-offset-3  col-lg-6">
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6 ">
                                        <label>Name</label>

                                    </div>
                                    <div class="col-lg-6 ">
                                        <input class="form-control" type="text" id="productname">
                                    </div>
                                </div>
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6 ">
                                        <label>Type</label>
                                    </div>
                                    <div class="col-lg-6 ">
                                        <label class="radio-inline"><input type="radio" name="optradio" value="0" id="radio">Local</label>
                                        <label class="radio-inline"><input type="radio" name="optradio" value="1" id="radio1">Imported</label>
                                    </div>
                                </div>
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6 ">
                                        <label>Catogery</label>
                                    </div>
                                    <div class="col-lg-6 ">
                                        <select id="ProductCatogeryDropdown" class="form-control"></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6 ">
                                        <label>Brand</label>

                                    </div>
                                    <div class="col-lg-6 ">
                                        <input class="form-control" type="text" id="brand">
                                    </div>
                                </div>

                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6">
                                        <label>Model</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <input class="form-control" type="text" id="product_model">
                                    </div>
                                </div>
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6">
                                        <label>Inward Date</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <input class="form-control" type="date" id="inward_date">
                                    </div>
                                </div>
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6">
                                        <label>Description</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <textarea type="text" id="Description" cols="20" rows="3" class="form-control" placeholder="Description Of Project"></textarea>
                                    </div>
                                </div>
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6">
                                        <label>Image</label>
                                    </div>

                                    <div class="col-lg-6">
                                        <div>
                                            <input name="myFile" type="file" id="images" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6">
                                        <label>Quantity</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <input class="form-control" type="number" id="quantity">
                                    </div>
                                </div>
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6">
                                        <label>Barcode</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <input class="form-control" type="text" id="barcode">
                                    </div>
                                </div>
                                <div class="col-lg-12 spacing">
                                    <div class="col-lg-6">
                                        <label>Vendor Name</label>
                                    </div>
                                    <div class="col-lg-6">
                                        <input class="form-control" type="text" id="vendor">
                                    </div>
                                </div>
                                <div class="col-lg-offset-6 col-lg-6 spacing">
                                    <<button  class="btn btn-success" onclick="Add()" id="button"> Create </button>
                                    <<button  class="btn btn-info" value="Reset" onclick="location.reload();" />
                                </div>
                            </div>
                            <!-- /.col-lg-6 (nested) -->
                            <!-- /.col-lg-6 (nested) -->
                        </div>
                        <!-- /.row (nested) -->
                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
    </div>
    <!-- /#page-wrapper -->
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            async: false,
            url: '/api/InventoryApi/',
            type: 'GET',
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (data) {               
                $.each(data, function (i) {               
                    $('#ProductCatogeryDropdown').append($('<option></option>').val(data[i].id).html(data[i].name));
                });
            },
            error: function () { alert('Dropdown Not Load'); }
        });
    });
    $('#images').on('change', function (e) {
        var files = e.target.files;
        //var myID = 3; //uncomment this to make sure the ajax URL works
        if (files.length > 0) {
            if (window.FormData !== undefined) {
                Imagedata = new FormData();
                for (var x = 0; x < files.length; x++) {
                    Imagedata.append("file" + x, files[x]);
                }
            }
        }
    });
    function Add() {
        var radio = document.getElementById('radio').checked;
        var radio1 = document.getElementById('radio1').checked;
        var val = "";
        if (radio == true) {
            radioval = "0"
        }
        else {
            radioval = "1";
        }
        //          
       //
        var model = {
            name: document.getElementById('productname').value.trim(),
            type: radioval,
            catogrey: document.getElementById('ProductCatogeryDropdown').value.trim(),
            brand: document.getElementById('brand').value.trim(),
            model: document.getElementById('product_model').value.trim(),
            description: document.getElementById('Description').value.trim(),
            quantity: document.getElementById('quantity').value.trim(),
            barcode: document.getElementById('barcode').value.trim(),
            vendorName: document.getElementById('vendor').value.trim(),
            inwarddate: document.getElementById('inward_date').value.trim()
        }
       
        $.ajax({
            async: false,
            url: '/api/InventoryApi/',
            type: 'POST',
            data: JSON.stringify(model),
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (data) {

                //another ajax call for saving image
                //

                $.ajax({
                    type: "POST",
                    url: '/api/UploadFileApi/',
                    contentType: false,
                    processData: false,
                    data: Imagedata,
                    success: function(result) {
                        console.log(result);
                    },
                    error: function (xhr, status, p3, p4){
                        var err = "Error " + " " + status + " " + p3 + " " + p4;
                        if (xhr.responseText && xhr.responseText[0] == "{")
                            err = JSON.parse(xhr.responseText).Message;
                        console.log(err);
                    }
                });
                //


                alert(data); location.reload()
            },
            error: function () { alert("Error"); }
        });
    }
</script>
